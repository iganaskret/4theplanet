"use strict";let imported=document.createElement("script");imported.src="js.js",window.setTimeout((function(){document.querySelector("#loading-image").classList.add("fade_loader"),window.setTimeout((function(){document.querySelector("#loading-image").style.display="none",document.querySelector("#loading").classList.add("fade_loader"),document.querySelector("#loading").style.display="none"}),1e3)}),3e3),AOS.init({duration:2200});const form_code=document.querySelector("form#form_code"),form_newsletter=document.querySelector("#form_newsletter");let postLink="http://iganaskret.com/wpv1/wp-json/wp/v2/4earth?_embed";const template=document.querySelector("template").content;function submitFormCode(e){let t=JSON.stringify(e);fetch("https://form4earth-2b74.restdb.io/rest/form4earth",{method:"post",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5de4e9004658275ac9dc2184","cache-control":"no-cache"},body:t}).then(e=>e.json()).then(e=>submittingCompleted(e))}function submittingCompleted(e){console.log(e),400==e.status?alert("Your email is already in our database!"):(form_code.classList.add("hide"),document.querySelector(".success-message").classList.remove("hide"))}fetch("https://form4earth-2b74.restdb.io/rest/form4earth",{method:"get",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5de4e9004658275ac9dc2184","cache-control":"no-cache"}}).then(e=>e.json()).then(e=>console.log(e)),form_code.addEventListener("submit",e=>{if(e.preventDefault(),form_code.reportValidity()){submitFormCode({Name:form_code.elements.fullname.value,Email:form_code.elements.email.value,Subscriber:form_code.elements.subscription.value})}else alert("It's seems like your email is incorrect")});var btn_code=document.querySelector("#ticketButton"),sect1=document.querySelector("#sect_1"),sect2=document.querySelector("#sect_2"),overlay=document.querySelector("#morph"),morphing=anime({targets:".morph",d:[{value:"M8734-7299h154.057s469.97.589,956,0,614.614,0,614.614,0H8734Z"},{value:"M8734-7299l-.184,1079.988h1922.5V-7299Z"}],easing:"easeInOutQuint",duration:1300,loop:!1,autoplay:!1});function loadData(){fetch(postLink).then(e=>e.json()).then(showWpData)}btn_code.addEventListener("click",(function(){document.body.style="overflow: hidden; ",morphing.restart(),overlay.classList.add("pointer"),sect2.classList.add("animated","display","flipInY","delay-1s")}));let counter=1;function showWpData(e){e.forEach(e=>{const t=template.cloneNode(!0),o=t.querySelector(".paragraph_title"),n=t.querySelector(".paragraph_text");t.querySelector(".lottie-placeholder").setAttribute("id","lottie"+counter),counter++,o.textContent=e.title.rendered,n.innerHTML=e.content.rendered,document.querySelector("."+e.position).appendChild(t)}),loadLottieData(),loadLottieData2()}function loadSVG(e){document.querySelector(".SVG_ticket_btn").innerHTML=e}loadData(postLink),fetch("../ticket.svg").then(e=>e.text()).then(e=>loadSVG(e));let params_ticket=lottie.loadAnimation({container:document.querySelector("#svg_ticket"),renderer:"svg",loop:!1,autoplay:!1,path:"data_ticket.json"});function startTicket(){params_ticket.play()}params_ticket.setSpeed(2.1),params_ticket.addEventListener("complete",(function(){document.querySelector(".SVG_ticket_btn").style="display: block"})),params_ticket.addEventListener("enterFrame",(function(e){e.currentTime>params_ticket.totalFrames-1&&params_ticket.pause()}));const btn_newsletter=document.querySelector(".button3"),email_input=document.querySelector('input[name="email"]'),submit_btn=document.querySelector(".submit");function submitFormSubscribtion(e){let t=JSON.stringify(e);console.log(t),fetch("https://form4earth-2b74.restdb.io/rest/subscribers",{method:"post",headers:{"Content-Type":"application/json; charset=utf-8","x-apikey":"5de4e9004658275ac9dc2184","cache-control":"no-cache"},body:t}).then(e=>e.json()).then(e=>submittingCompletedNewsletter(e))}function submittingCompletedNewsletter(e){console.log(e),400==e.status?alert("Your email is already in our database!"):(form_newsletter.classList.add("hide"),document.querySelector(".newsletter_finish").classList.remove("hide"))}btn_newsletter.addEventListener("click",(function(){btn_newsletter.classList.add("circle-in"),btn_newsletter.innerHTML=" "})),btn_newsletter.addEventListener("animationend",(function(){form_newsletter.classList.remove("hide"),email_input.classList.add("oval-in"),submit_btn.classList.add("oval-in-submit"),btn_newsletter.classList.add("hide")})),form_newsletter.addEventListener("submit",e=>{if(e.preventDefault(),form_newsletter.reportValidity()){const e={Email:form_newsletter.elements.email.value};console.log(e),submitFormSubscribtion(e)}else alert("It's seems like your email is incorrect")});let gamecount=0;const machine_lever=document.querySelector(".lever");function loadLottieData(){var e;let t={container:document.querySelector("#lottie3"),renderer:"svg",loop:!1,autoplay:!1,rendererSettings:{progressiveLoad:!1,preserveAspectRatio:"xMidYMid slice"},path:"icon_1.json"};e=bodymovin.loadAnimation(t),$(window).scroll((function(){let t=120*$(window).scrollTop()/($(document).height()-$(window).height()),o=Math.round(t);e.goToAndStop(o/100*4e3)}))}function loadLottieData2(){var e;let t={container:document.querySelector("#lottie2"),renderer:"svg",loop:!1,autoplay:!1,rendererSettings:{progressiveLoad:!1,preserveAspectRatio:"xMidYMid slice"},path:"icon_2.json"};e=bodymovin.loadAnimation(t),$(window).scroll((function(){let t=100*$(window).scrollTop()/($(document).height()-$(window).height()),o=Math.round(t);e.goToAndStop(o/100*4e3)}))}machine_lever.addEventListener("click",(function(){if(machine_lever.classList.add("lever_animation"),gamecount++,console.log(gamecount),gamecount>6){startTicket();let e=document.querySelector(".slot_machine"),t=document.createElement("span");t.classList.add("comm"),document.querySelector(".slot_machine").style.backgroundImage="url('/images/confetti.gif')",document.querySelector(".slot_machine").style.backgroundPosition="center",document.querySelector(".slot_machine").style.backgroundRepeat="no-repeat",document.querySelector(".slot_machine").style.backgroundSize="cover",t.textContent="SORRY YOU'RE NOT SO LUCKY TODAY BUT HERE IS YOUR FREE TICKET ANYWAY",e.appendChild(t)}})),machine_lever.addEventListener("animationend",(function(){machine_lever.classList.remove("lever_animation")})),document.querySelector(".close-btn").addEventListener("click",()=>{morphing.reverse(),morphing.play(),overlay.classList.remove("pointer"),sect2.classList.remove("animated","display","flipInY","delay-1s"),document.body.style="overflow: auto; ",form_code.classList.remove("hide"),document.querySelector(".success-message").classList.add("hide"),document.querySelector(".comm").classList.add("hide"),document.querySelector(".SVG_ticket_btn").style="display: none",document.querySelector(".slot_machine").style.backgroundImage="none"});
